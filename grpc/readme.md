<!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-generate-toc again -->

* [grpc](#grpc)
  * [grpc的优势](#grpc的优势)
  * [grpc负载均衡](#grpc负载均衡)
  


<!-- markdown-toc end -->

# grpc
## grpc的优势
+ 基于HTTP/2 提供了连接多路复用、双向流、服务器推送(基于http2流式特点,相比于其他的rpc,一般场景下不用构造连接池,单个grpc连接吞吐量大概在90000qps)
+ 基于protobuf的二进制编码,传输数据更小,更高效
+ 序列化反序列化直接对应程序中的数据类，不需要解析后在进行映射

## grpc负载均衡
### 1.集中式LB
在服务消费者和服务提供者之间有一个独立的LB,通常是由运维负载,LB要具备健康检查能力,自动摘除不健康的服务实例,缺点就是当并发量过高,LB本身容易成为瓶颈,而且服务方和消费方之间增加了一级,多了一定的性能开销

### 2.进程内LB
针对第一个方案的不足，此方案将LB的功能集成到服务消费方进程里，也被称为软负载或者客户端负载方案,缺点是增加了开发成本,如果是几种不同的语言,要开发几种不同语言的实现

### 3.独立的LB
是针对第二个方案的改进,将进程内LB独立出来成为主机中的一个独立的进程